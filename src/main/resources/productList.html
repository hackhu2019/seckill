<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品列表页</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/footer.css">
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    .carousel-item {
        height: 32rem;
    }



    .item-price {
        float: left;
        color: #f40;
    }

    .deal-cnt {
        float: right;
        color: #888;
    }
</style>

<body>
    <header>
        <nav class="navbar navbar-dark fixed-top bg-danger flex-md-nowrap p-0 shadow">
            <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">hack-hu秒杀系统</a>
            <input class="form-control form-control-dark w-100" type="text" placeholder="查找商品" aria-label="Search">
            <ul class="navbar-nav px-3">
                <li class="nav-item">
                    <a class="nav-link text-light" href="index.html">登录系统</a>
                </li>
            </ul>
        </nav>
    </header>
    <main role="main">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="img/show/1.jpg" class="d-block w-100" alt="轮播图1">
                    <div class="carousel-caption">
                        <p><a class="btn btn-lg btn-danger" href="#" role="button">了解更多</a></p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="img/show/2.jpg" class="d-block w-100" alt="轮播图2">
                    <div class="carousel-caption">
                        <p><a class="btn btn-lg btn-danger" href="#" role="button">了解更多</a></p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="img/show/3.jpg" class="d-block w-100" alt="轮播图3">
                    <div class="carousel-caption">
                        <p><a class="btn btn-lg btn-danger" href="#" role="button">了解更多</a></p>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <div class="album py-5 bg-light">
            <div class="container">

                <div class="row item-content">
                    <!-- <div class="col-md-4 item-card">
                        <div class="card mb-4 shadow-sm" style="width:18rem;">
                            <img src="./img/item/1.jpg" class="card-img-top" alt="商品1">
                            <div class="card-body">

                                <h5 class="card-title">四核八核i7吃鸡游戏组装电脑主机DIY独显LOL台式机办公i5整机全套</h5>
                                <div class="item">
                                    <div class="item-price">
                                        <span>￥</span>
                                        <strong class="price">9999</strong>
                                    </div>
                                    <div class="deal-cnt pl-3">999人付款</div>
                                </div>
                                <div class="d-flex align-items-center clearfix" style="float: left; width: 18rem;">
                                    <div class="btn-group">
                                        <span hidden class="item-id">1</span>
                                        <button type="button"
                                            class="btn btn-sm btn-outline-secondary getDetail">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card mb-4 shadow-sm" style="width:18rem;">
                            <img src="./img/item/1.jpg" class="card-img-top" alt="商品1">
                            <div class="card-body">
                                <h5 class="card-title">四核八核i7吃鸡游戏组装电脑主机DIY独显LOL台式机办公i5整机全套</h5>
                                <div class="item">
                                    <div class="item-price">
                                        <span>￥</span>
                                        <strong class="price">9999</strong>
                                    </div>
                                    <div class="deal-cnt pl-3">999人付款</div>
                                </div>
                                <div class="d-flex align-items-center clearfix" style="float: left; width: 18rem;">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card mb-4 shadow-sm" style="width:18rem;">
                            <img src="./img/item/1.jpg" class="card-img-top" alt="商品1">
                            <div class="card-body">
                                <h5 class="card-title">四核八核i7吃鸡游戏组装电脑主机DIY独显LOL台式机办公i5整机全套</h5>
                                <div class="item">
                                    <div class="item-price">
                                        <span>￥</span>
                                        <strong class="price">9999</strong>

                                    </div>
                                    <div class="deal-cnt pl-3">999人付款</div>
                                </div>
                                <div class="d-flex align-items-center clearfix" style="float: left; width: 18rem;">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-outline-secondary">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </main>
    <div class="text-muted text-center bg-danger pt-2">
        <div class="container text-light">
            <ul class="bd-footer-links">
                <li><a href="https://github.com/hackhu2019">GitHub&nbsp;</a></li>
                <li><a href="https://blog.csdn.net/qq_38288847">CSDN&nbsp;</a></li>
                <li><a href="https://www.zhihu.com/people/hu-hao-77-99/columns">码农学习之路</a></li>
            </ul>
            版权所有 © 秒杀系统　浙ICP备20010562号　制作维护：hack-hu　推荐使用chrome浏览器
        </div>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="js/g_host.js"></script>
    <script>
        //定义全局商品数组信息
        var g_itemList = [];
        jQuery(document).ready(function () {
        
            $.ajax({
                type: "GET",
                contentType: "application/x-www-form-urlencoded",
                url: "http://" + host + "/item/getAll",
                xhrFields: {
                    withCredentials: true
                },
                success: function (data) {
                    if (data.status == "success") {
                        g_itemList = data.data;
                        console.log(g_itemList)
                        reloadDom();
                    } else {
                        alert("获取商品信息失败，原因为" + data.data.errMsg);
                    }
                },
                error: function (data) {
                    alert("获取商品信息失败失败，原因为" + data.responseText);
                }
            });
            
            // $(".getDetail").click(function () {
            //     console.log("执行方法")
            //     var id = $(this).parent().children(".item-id").text();
            //     console.log("获得文本值" + id);
            //     window.location.href = "itemDetail.html?id=" + id;
            // })
        });

        function showDetail(id){
            console.log(id)
        }

        function reloadDom() {
            let Dom = ''
            for (var i = 0; i < g_itemList.length; i++) {
                var itemVO = g_itemList[i];

                Dom+=`
                <div class="col-md-4 item-card">
                        <div class="card mb-4 shadow-sm" style="width:18rem;">
                            <img src=${itemVO.imgUrl||''} class="card-img-top" alt="商品1">
                            <div class="card-body">

                                <h5 class="card-title">${itemVO.title}</h5>
                                <div class="item">
                                    <div class="item-price">
                                        <span>￥</span>
                                        <strong class="price">${itemVO.price}</strong>
                                    </div>
                                    <div class="deal-cnt pl-3">${itemVO.sales}人付款</div>
                                </div>
                                <div class="d-flex align-items-center clearfix" style="float: left; width: 18rem;">
                                    <div class="btn-group">
                                        <span hidden class="item-id">${itemVO.id}</span>
                                        <button type="button"
                                            class="btn btn-sm btn-outline-secondary getDetail ">查看详情</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    `
            }
            $(".item-content").append($(Dom));
            $(".getDetail").click(function () {
                    console.log("执行方法")
                    let id = $(this).parent().children(".item-id").text();
                    console.log("获得文本值" + id);
                    window.location.href = "itemDetail.html?id=" + id;
                })
        }
    </script>
</body>

</html>